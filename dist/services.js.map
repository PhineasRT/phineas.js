{"version":3,"sources":["services.js"],"names":[],"mappings":";;;;;;8BAAoB,iBAAiB;;;;sBAClB,UAAU;;;;AAE7B,IAAM,OAAO,GAAG,oBAAO,OAAO,CAAC,MAAM,CAAC,CAAA;;;;;AAKtC,SAAS,UAAU,CAAE,IAAe,EAAE;MAAhB,KAAK,GAAN,IAAe,CAAd,KAAK;MAAE,MAAM,GAAd,IAAe,CAAP,MAAM;;AACjC,MAAI,OAAO,GAAG,EAAC,KAAK,EAAL,KAAK,EAAE,MAAM,EAAN,MAAM,EAAC,CAAA;AAC7B,MAAI,OAAO,GAAG;AACZ,UAAM,EAAE,MAAM;AACd,OAAG,EAAE,OAAO,GAAG,iBAAiB;AAChC,QAAI,EAAE,EAAC,OAAO,EAAP,OAAO,EAAC;AACf,QAAI,EAAE,IAAI;GACX,CAAA;;AAED,SAAO,iCAAQ,OAAO,CAAC,CACpB,IAAI,CAAC,UAAU,GAAG,EAAE;;AAEnB,QAAI,CAAC,GAAG,CAAC,EAAE,EAAE,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAA;;AAEtD,QAAI,GAAG,CAAC,MAAM,KAAK,UAAU,EAAE;AAC7B,aAAO,CAAC,GAAG,gCAA8B,KAAK,sBAAmB,CAAA;AACjE,aAAO,SAAQ,OAAO,CAAC,EAAC,QAAQ,EAAE,EAAE,EAAC,CAAC,CAAA;KACvC;;AAED,WAAO,SAAQ,OAAO,CAAC,EAAC,QAAQ,EAAE,GAAG,CAAC,QAAQ,EAAC,CAAC,CAAA;GACjD,CAAC,CAAA;CACL;;AAED,OAAO,CAAC,UAAU,GAAG,UAAU,CAAA","file":"services.js","sourcesContent":["import request from 'request-promise'\nimport config from './config'\n\nconst backend = config.backend[\"prod\"]\n// const log = console.log.bind(console, '[sdk/services]')\n\n// log(\"[env]\", process.env.BUILD_ENV)\n\nfunction initialize ({appID, secret}) {\n  var project = {appID, secret}\n  let options = {\n    method: 'POST',\n    uri: backend + '/project/status',\n    body: {project},\n    json: true\n  }\n\n  return request(options)\n    .then(function (res) {\n      // log(res)\n      if (!res.ok) throw new Error('could not get services')\n\n      if (res.status === 'creating') {\n        console.log(`[phineas-sdk] Application ${appID} not created yet`)\n        return Promise.resolve({services: []})\n      }\n\n      return Promise.resolve({services: res.services})\n    })\n}\n\nexports.initialize = initialize\n"],"sourceRoot":"/source/"}